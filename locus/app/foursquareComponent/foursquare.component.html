<div class="zippy">
    <div 
        class="zippy-title"
        (click)="toggle()">
        <div *ngIf="selectedLocation">
            <h3> Recommended places to visit in {{ selectedLocation.cityName }} </h3>
        </div>
        <i 
            class="pull-right glyphicon" 
            [ngClass]="
                { 
                    'glyphicon-chevron-down': !isExpanded, 
                    'glyphicon-chevron-up': isExpanded 
                }">
        </i>
    </div>
    <div *ngIf="isExpanded" class="zippy-content">

        <div class="zippy">
              <div 
                  class="zippy-title"
                  *ngFor="#place of popularPlaces; #i=index">
                  <div class="media">
                        <div class="media-body">
                            <a href="{{ place.venue.url }}" target="_blank"><h3 class="media-heading">{{ place.venue.name }}</h3></a>
                            <h4 class="media-heading">{{ place.venue.contact.formattedPhone }}</h4>
                            <label><b>Popular for:</b></label>
                            <ul class="liCategory">
                                <li class="liCategory" *ngFor="#category of place.venue.categories">
                                    <span class="label label-primary">{{ category.name }}</span>
                                </li>
                            </ul>
                            
                            <h5 class="media-heading"><b>{{ place.venue.location.formattedAddress[0] }},</b></h5>
                            <h5 class="media-heading"><b>{{ place.venue.location.formattedAddress[1] }}</b></h5>
                            <a target="_blank" href="{{mapUrl + place.venue.location.address + ' ' + place.venue.location.postalCode }}">Click here to get directions</a>
                        </div>

                        <div *ngIf="isTipsExpanded[i]" class="zippy-content">        
                            <div class="media-body" *ngFor="#tip of place.tips">
                                <div class="well well-sm">
                                        {{ tip.text }}
                                </div>
                                <label>By: {{ tip.user.firstName}} {{tip.user.lastName}} </label>
                                <span class="label label-primary" *ngIf="tip.likes">{{ tip.likes.summary }}</span>
                                <a target="_blank" href="{{ tip.canonicalUrl }}">Click to see the post</a>                    
                            </div>
                            
                        </div>
                        <label>Rating: <span class="label label-success">{{ place.venue.rating}}</span> (Rated by {{ place.venue.ratingSignals }} people)</label>
                        
                        <div (click)="toggleTips(i)">
                            <div class="pull-right" *ngIf="isTipsExpanded[i]">
                                <span class="label label-warning">Hide what people think about this place?</span>
                            </div>
                            <div class="pull-right" *ngIf="!isTipsExpanded[i]">
                                <span class="label label-primary">Show what people think about this place?</span>
                            </div>
                        </div>
                        
                    </div>
                    <hr>
              </div>
                    
              </div>
      </div>

</div>




